{
    "version": "2.0.0",
    "tasks": [
        {
            "label": "Build",
            "type": "shell",
            "group": {
                "kind": "build",
                "isDefault": true
            },
            "windows": {
                "command": [
                    "cd openssl;",
                    "meson setup builddir --buildtype=release;",
                    "meson compile -C builddir;",
                    "cd ..;",
                    "mkdir -force builddir;",
                    "cd builddir;",
                    "cp -r -force ../openssl/subprojects/openssl-3.0.2/generated-config/archs/VC-WIN64A/no-asm/include ../openssl/subprojects/openssl-3.0.2;",
                    "cmake .. -DENABLE_CRYPTO=ON -DPOCO_MT=ON -DBUILD_SHARED_LIBS=OFF -DOPENSSL_INCLUDE_DIR=C:/Projects/poco/openssl/subprojects/openssl-3.0.2/include -DOPENSSL_CRYPTO_LIBRARY=../openssl/builddir/subprojects/openssl-3.0.2/libcrypto.a -DOPENSSL_SSL_LIBRARY=../openssl/builddir/subprojects/openssl-3.0.2/libssl.a;",
                    "cmake --build . --config Release"
                ],
                "problemMatcher": {
                    "base": "$msCompile",
                    "fileLocation": [
                        "relative",
                        "${workspaceFolder}/builddir"
                    ]
                }
            },
            "osx": {
                "command": [
                    "cd openssl &&",
                    "meson setup builddir --buildtype=release &&",
                    "meson compile -C builddir &&",
                    "cd .. &&",
                    "mkdir -p builddir &&",
                    "cd builddir &&",
                    "cp -r ../openssl/subprojects/openssl-3.0.2/generated-config/archs/darwin64-x86_64-cc/asm/include ../openssl/subprojects/openssl-3.0.2 &&",
                    "cmake .. -DENABLE_CRYPTO=ON -DBUILD_SHARED_LIBS=OFF -DCMAKE_BUILD_TYPE=Release -DOPENSSL_INCLUDE_DIR=../openssl/subprojects/openssl-3.0.2/include -DOPENSSL_CRYPTO_LIBRARY=../openssl/builddir/subprojects/openssl-3.0.2/libcrypto.a -DOPENSSL_SSL_LIBRARY=../openssl/builddir/subprojects/openssl-3.0.2/libssl.a &&",
                    "cmake --build . -- -j8"
                ],
                "problemMatcher": {
                    "base": "$gcc",
                    "fileLocation": [
                        "relative",
                        "${workspaceFolder}/builddir/"
                    ]
                }
            }
        }
    ]
}
